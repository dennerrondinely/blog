---
title: 'React Profiler Component: Medindo Performance Programaticamente'
description: 'Aprenda a usar o componente Profiler do React para medir performance de renderiza√ß√£o automaticamente. Integre monitoramento de performance direto no seu c√≥digo.'
date: '2026-02-14'
tags: ['react', 'performance', 'monitoring', 'hooks', 'debugging']
locale: 'pt'
---

# üìä React Profiler Component: Medindo Performance Programaticamente

Se voc√™ leu nosso artigo anterior sobre React Profiler vs Lighthouse, voc√™ conhece a **ferramenta visual** de profiling. Mas e se voc√™ quisesse medir performance **automaticamente** no seu c√≥digo?

√â aqui que entra o componente Profiler do React. Este √© um componente built-in que permite medir a performance de renderiza√ß√£o **programaticamente**, sem precisar abrir o DevTools.

---

## üéØ O que √© o Componente Profiler?

O componente Profiler √© um componente React que envolve uma √°rvore de componentes e rastreia:

- ‚è±Ô∏è **Tempo real de renderiza√ß√£o** (actualDuration)
- üìè **Tempo estimado sem otimiza√ß√µes** (baseDuration)
- üì± **Fase de renderiza√ß√£o** (mount vs update)
- üî¢ **Timestamps** de in√≠cio e conclus√£o

### Sintaxe B√°sica

```typescript
<Profiler id="meus-componentes" onRender={onRenderCallback}>
  <MeuComponente />
</Profiler>
```

Isso √© tudo! O `<Profiler>` automaticamente come√ßar√° a rastrear a performance de `MeuComponente` e seus filhos.

---

## üìù Props do Profiler Component

### `id` (string, obrigat√≥rio)

Um identificador √∫nico para este profiler:

```typescript
<Profiler id="Sidebar" onRender={onRender}>
  <Sidebar />
</Profiler>

<Profiler id="Content" onRender={onRender}>
  <Content />
</Profiler>
```

O `id` √© passado ao callback, permitindo identificar qual parte foi renderizada.

### `onRender` (fun√ß√£o, obrigat√≥rio)

A fun√ß√£o chamada toda vez que um componente dentro do Profiler √© renderizado:

```typescript
function onRender(id, phase, actualDuration, baseDuration, startTime, commitTime) {
  console.log(`${id} (${phase}) levou ${actualDuration}ms`);
}

<Profiler id="App" onRender={onRender}>
  <App />
</Profiler>
```

---

## üîç Entendendo os Par√¢metros do Callback

O callback `onRender` recebe 6 par√¢metros importantes:

### 1. `id` (string)

O identificador do Profiler que foi acionado:

```typescript
function onRender(id) {
  console.log(`Profiler "${id}" foi renderizado`);
}
```

### 2. `phase` (string)

Pode ser:
- `"mount"` - Componente est√° sendo montado pela primeira vez
- `"update"` - Componente est√° sendo atualizado
- `"nested-update"` - Um componente filho foi atualizado

```typescript
function onRender(id, phase) {
  if (phase === "mount") {
    console.log("Primeira renderiza√ß√£o!");
  } else if (phase === "update") {
    console.log("Componente re-renderizou");
  }
}
```

### 3. `actualDuration` (n√∫mero em ms)

**Tempo real** que levou para renderizar este componente e seus filhos:

```typescript
function onRender(id, phase, actualDuration) {
  console.log(`Tempo real de renderiza√ß√£o: ${actualDuration}ms`);
  
  if (actualDuration > 1000) {
    console.warn("‚ö†Ô∏è Renderiza√ß√£o lenta detectada!");
  }
}
```

### 4. `baseDuration` (n√∫mero em ms)

**Tempo estimado** se o componente n√£o tivesse **nenhuma otimiza√ß√£o** (memo, useMemo, useCallback):

```typescript
function onRender(id, phase, actualDuration, baseDuration) {
  const optimizationGain = baseDuration - actualDuration;
  console.log(`Economia com otimiza√ß√µes: ${optimizationGain}ms`);
  
  // Se a diferen√ßa √© pequena, talvez voc√™ precise mais otimiza√ß√µes
  if (optimizationGain < 10) {
    console.warn("Poucas otimiza√ß√µes encontradas");
  }
}
```

### 5. `startTime` (n√∫mero em ms)

Timestamp de quando React come√ßou a renderizar:

```typescript
function onRender(id, phase, actualDuration, baseDuration, startTime) {
  console.log(`Renderiza√ß√£o come√ßou em: ${startTime}ms`);
}
```

### 6. `commitTime` (n√∫mero em ms)

Timestamp de quando o DOM foi atualizado:

```typescript
function onRender(id, phase, actualDuration, baseDuration, startTime, commitTime) {
  const totalTime = commitTime - startTime;
  console.log(`Tempo total (render + commit): ${totalTime}ms`);
}
```

---

## üí° Exemplos Pr√°ticos

### Exemplo 1: Detectar Renderiza√ß√µes Lentas

```typescript
import { Profiler } from 'react';

function onRender(id, phase, actualDuration) {
  if (actualDuration > 500) {
    // Enviar para servi√ßo de monitoramento
    analytics.log('slow_render', {
      component: id,
      duration: actualDuration,
      phase
    });
  }
}

export default function App() {
  return (
    <Profiler id="App" onRender={onRender}>
      <Header />
      <ProductList />
      <Footer />
    </Profiler>
  );
}
```

### Exemplo 2: Medir Diferentes Se√ß√µes

```typescript
function onRender(id, phase, actualDuration, baseDuration) {
  console.table({
    'ID': id,
    'Phase': phase,
    'Actual': `${actualDuration.toFixed(2)}ms`,
    'Base': `${baseDuration.toFixed(2)}ms`,
    'Savings': `${(baseDuration - actualDuration).toFixed(2)}ms`
  });
}

export default function Dashboard() {
  return (
    <>
      <Profiler id="Sidebar" onRender={onRender}>
        <Sidebar />
      </Profiler>

      <Profiler id="MainContent" onRender={onRender}>
        <MainContent />
      </Profiler>

      <Profiler id="RightPanel" onRender={onRender}>
        <RightPanel />
      </Profiler>
    </>
  );
}
```

### Exemplo 3: Enviar M√©tricas para Servi√ßo de Monitoramento

```typescript
import { Profiler } from 'react';

const performanceLogger = (id, phase, actualDuration, baseDuration, startTime, commitTime) => {
  // Enviar para seu servi√ßo (NewRelic, Datadog, etc)
  fetch('/api/metrics', {
    method: 'POST',
    body: JSON.stringify({
      component: id,
      phase,
      actualDuration,
      baseDuration,
      timestamp: new Date().toISOString()
    })
  });
};

export default function App() {
  return (
    <Profiler id="App" onRender={performanceLogger}>
      <YourApp />
    </Profiler>
  );
}
```

---

## üèóÔ∏è Profilers Aninhados

Voc√™ pode aninhar m√∫ltiplos Profilers para medir partes espec√≠ficas:

```typescript
export default function App() {
  return (
    <Profiler id="App" onRender={onRender}>
      <Header />
      
      <Profiler id="Sidebar" onRender={onRender}>
        <Sidebar />
      </Profiler>

      <Profiler id="Content" onRender={onRender}>
        <div>
          <Profiler id="Editor" onRender={onRender}>
            <Editor />
          </Profiler>
          
          <Profiler id="Preview" onRender={onRender}>
            <Preview />
          </Profiler>
        </div>
      </Profiler>

      <Footer />
    </Profiler>
  );
}
```

Quando o Editor renderiza, voc√™ ver√°:
1. `onRender` chamado para "Editor"
2. `onRender` chamado para "Content" (pai)
3. `onRender` chamado para "App" (av√≥)

---

## ‚ö†Ô∏è Importantes Considera√ß√µes

### 1. Overhead em Produ√ß√£o

O `<Profiler>` **adiciona overhead**. Em desenvolvimento est√° sempre ativo, mas em produ√ß√£o voc√™ precisa ativar explicitamente:

```typescript
// Em ambiente de desenvolvimento
const ENABLE_PROFILER = process.env.NODE_ENV === 'development';

export default function App() {
  const Component = (
    <Header />
    // ... seus componentes
  );

  if (ENABLE_PROFILER) {
    return (
      <Profiler id="App" onRender={onRender}>
        {Component}
      </Profiler>
    );
  }

  return Component;
}
```

### 2. N√£o Substitui o DevTools

O componente `<Profiler>` √© para **programaticamente coletar m√©tricas**. Para an√°lise visual interativa, use o React DevTools Profiler.

### 3. N√£o Faz Micro-otimiza√ß√µes

O `<Profiler>` mede renderiza√ß√µes, n√£o execu√ß√£o de c√≥digo:

```typescript
// ‚ùå N√£o mede isto
function MyComponent() {
  const result = expensiveCalculation(); // N√£o √© medido
  return <div>{result}</div>;
}

// ‚úÖ Use useMemo para isto
function MyComponent() {
  const result = useMemo(() => expensiveCalculation(), []);
  return <div>{result}</div>;
}
```

---

## üìà Caso Real: Monitoramento de E-commerce

```typescript
import { Profiler } from 'react';

const performanceAnalytics = {
  metrics: [],
  
  log(id, phase, actualDuration, baseDuration) {
    this.metrics.push({
      id,
      phase,
      actualDuration,
      baseDuration,
      timestamp: Date.now()
    });

    // Alertar se algo est√° muito lento
    if (actualDuration > 1000) {
      this.alertSlowRender(id, actualDuration);
    }

    // Enviar para servidor a cada 10 renders
    if (this.metrics.length >= 10) {
      this.sendToServer();
    }
  },

  alertSlowRender(id, duration) {
    console.warn(`üê¢ ${id} renderizou em ${duration}ms`);
  },

  sendToServer() {
    fetch('/api/performance', {
      method: 'POST',
      body: JSON.stringify(this.metrics)
    });
    this.metrics = [];
  }
};

function onRender(id, phase, actualDuration, baseDuration) {
  performanceAnalytics.log(id, phase, actualDuration, baseDuration);
}

export default function EcommerceSite() {
  return (
    <Profiler id="Store" onRender={onRender}>
      <Header />
      <Profiler id="ProductListing" onRender={onRender}>
        <ProductList />
      </Profiler>
      <Profiler id="Cart" onRender={onRender}>
        <ShoppingCart />
      </Profiler>
      <Footer />
    </Profiler>
  );
}
```

---

## üöÄ Compara√ß√£o: Profiler Component vs React DevTools

| Aspecto | Profiler | React DevTools |
|---------|---------|-----------|
| **Como usar** | Componente no c√≥digo | UI visual |
| **Quando ativa** | Sempre (overhead) | Clique no DevTools |
| **Dados coletados** | Programaticamente | Visualmente analis√°veis |
| **Enviar m√©tricas** | ‚úÖ F√°cil | ‚ùå Dif√≠cil |
| **An√°lise interativa** | ‚ùå N√£o | ‚úÖ Sim |
| **Ideal para** | Monitoramento cont√≠nuo | Debugging |
| **Performance** | Pequeno overhead | Sem overhead quando desativado |

---

## üéì Quando Usar Profiler Component

### ‚úÖ Use quando:
- Voc√™ quer **monitorar performance em produ√ß√£o**
- Precisa **enviar m√©tricas para um servi√ßo**
- Quer **alertas autom√°ticos** de renderiza√ß√µes lentas
- Faz **testes A/B** de performance
- Implementa **real user monitoring (RUM)**

### ‚ùå N√£o use quando:
- Est√° apenas **debugando** localmente (use DevTools)
- Performance √© cr√≠tica e at√© pequeno overhead importa
- Voc√™ s√≥ quer an√°lise visual pontual

---

## üìä Integra√ß√£o com Servi√ßos de Monitoramento

### Google Analytics

```typescript
function onRender(id, phase, actualDuration) {
  gtag('event', 'component_render', {
    component_id: id,
    phase: phase,
    duration: actualDuration
  });
}
```

### Sentry

```typescript
import * as Sentry from "@sentry/react";

function onRender(id, phase, actualDuration) {
  Sentry.captureMessage(`${id} renderizou em ${actualDuration}ms`, 'info');
}
```

### Datadog

```typescript
function onRender(id, phase, actualDuration) {
  if (window.DD_RUM) {
    window.DD_RUM.addUserAction('component_render', {
      component: id,
      duration: actualDuration
    });
  }
}
```

---

## üéì Conclus√£o

O componente Profiler √© uma ferramenta poderosa para:

1. **Monitorar performance** automaticamente
2. **Coletar m√©tricas** em produ√ß√£o
3. **Alertar sobre renderiza√ß√µes lentas**
4. **Integrar com servi√ßos de an√°lise**

N√£o substitui o React DevTools (que √© melhor para debugging), mas √© essencial para monitoramento em tempo real de aplica√ß√µes em produ√ß√£o.

**Use Profiler onde DevTools n√£o chega: na produ√ß√£o!** üìä

---

## üîó Recursos

- [React Profiler Documentation](https://react.dev/reference/react/Profiler)
- [React DevTools Profiler](https://react.dev/learn/react-developer-tools)
- [Web Vitals](https://web.dev/vitals/)
- [Sentry Performance Monitoring](https://docs.sentry.io/platforms/javascript/performance/)
- [Datadog RUM](https://docs.datadoghq.com/real_user_monitoring/)